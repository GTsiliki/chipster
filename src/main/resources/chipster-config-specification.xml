<?xml version="1.0" encoding="UTF-8"?>

<configuration content-version="3">

	<configuration-module moduleId="messaging" description="communication">

		<entry entryKey="broker-host" type="string" mustBeSet="true" description="host of message broker (JMS server ActiveMQ) to connect to">
		</entry>

		<entry entryKey="broker-protocol" type="string" mustBeSet="true" description="protocol used to connect to message broker">
		</entry>

		<entry entryKey="broker-port" type="int" mustBeSet="true" description="port used to connect to message broker">
		</entry>

		<entry entryKey="use-chunked-http" type="boolean" description="should we use chunked HTTP mode when connecting to file broker, when disabled all data is loaded to memory">
			<value>true</value>
		</entry>

		<entry entryKey="use-reliable" type="boolean" description="use reliable connections (ie. redialling)">
			<value>true</value>
		</entry>
		
	</configuration-module>

	<configuration-module moduleId="security" description="encryption and authentication">

		<entry entryKey="keystore" type="string" description="keystore for SSL">
			<value>${chipster_security_dir}/keystore.ks</value>
		</entry>

		<entry entryKey="master-keystore" type="string" description="master keystore for SSL">
			<value>/keystore.ks</value>
		</entry>

		<entry entryKey="keypass" type="string" description="keystore password for SSL">
			<value>microarray</value>
		</entry>

		<entry entryKey="keyalias" type="string" description="alias of key to be used for SSL">
			<value>microarray</value>
		</entry>

		<entry entryKey="username" type="string" mustBeSet="true" description="username for authenticating connection to broker">
		</entry>

		<entry entryKey="password" type="string" description="password for authenticating connection to broker">
		</entry>
	
	</configuration-module>

	
	<configuration-module moduleId="filebroker" description="file broker">
	
		<entry entryKey="file-root-path" type="string" description="path to file broker cache directory">
			<value>file-root</value>
		</entry>
		
		<entry entryKey="file-life-time" type="int" description="how long files are stored in fileserver, seconds">
			<value>86400</value>
		</entry>

		<entry entryKey="clean-up-frequency" type="int" description="how often file cleanup check occurs, seconds">
			<value>3600</value>
		</entry>

		<entry entryKey="url" type="string" mustBeSet="true" description="url of this file broker instance">
		</entry>
		
        <entry entryKey="port" type="int" mustBeSet="true" description="server port to use in this file broker instance">
        </entry>

		<entry entryKey="jetty-debug" type="boolean" description="should Jetty web server run in debug mode (logs/wrapper.log)">
			<value>false</value>
		</entry>
        
	</configuration-module>


	<configuration-module moduleId="webstart" description="Java Web Start service">
	    
        <entry entryKey="port" type="int" mustBeSet="true" description="server port to use in this file broker instance">
        </entry>

    </configuration-module>
    
    
	<configuration-module moduleId="comp" description="comp service">

		<entry entryKey="work-dir" type="string" description="directory for temporary job files">
			<value>jobs-data</value>
		</entry>

		<entry entryKey="max-jobs" type="int" mustBeSet="true" description="maximum number of jobs run simultaneously">		
		</entry>

		<entry entryKey="receive-timeout" type="int" description="time after which a received job is removed, seconds">
			<value>3600</value>
		</entry>
		
		<entry entryKey="schedule-timeout" type="int" description="time after which a scheduled job is removed if there is now response from the client, seconds">
			<value>10</value>
		</entry>
		
		<entry entryKey="custom-scripts-dir" type="string" description="directory for overriding scripts">
			<value>custom-scripts</value>
		</entry>

		<entry entryKey="include-operations" type="strings" description="if specified, all but listed operations are excluded">
		</entry>
		
		<entry entryKey="exclude-operations" type="strings" description="if specified, listed operations are excluded">
		</entry>

		<entry entryKey="sweep-work-dir" type="boolean" description="should job specific temporary directory be sweeped after job execution">
			<value>true</value>
		</entry>
		
		<entry entryKey="r-process-pool-size-min" type="int" description="number of processes always available if possible">
			<value>5</value>int" 
		</entry>
		
		<entry entryKey="r-process-pool-size-max" type="int" description="max number of processes controlled by this pool (available and in use together)">
			<value>20</value>
		</entry>
		
		<entry entryKey="r-process-pool-timeout" type="int" description="timeout for waiting for a process to become available, seconds">
			<value>360</value>
		</entry>

		<entry entryKey="r-process-pool-process-use-count-max" type="int" description="used when deciding whether a process should be recycled">
			<value>10</value>
		</entry>

		<entry entryKey="r-process-pool-process-lifetime-max" type="int" description="used when deciding whether a process should be recycled, seconds">
			<value>36000</value>
		</entry>
		
		<entry entryKey="r-timeout" type="int" description="timeout for a single R script, seconds">
			<value>36000</value> <!-- 10 hours -->
		</entry>
		
		<entry entryKey="r-command" type="string" mustBeSet="true" description="the command the starts R environment">
		</entry>
		
		<entry entryKey="timeout-check-interval" type="int" description="receive, schedule timeout check interval, milliseconds">
			<value>1000</value>
		</entry>

		<entry entryKey="analysis-handlers" type="strings" description="analysis handlers (i.e., supported analysis types), order is significant">
			<value>fi.csc.microarray.analyser.r.RAnalysisHandler</value>
			<value>fi.csc.microarray.analyser.java.JavaAnalysisHandler</value>
			<value>fi.csc.microarray.analyser.bsh.BeanShellHandler</value>
		</entry>
		
		<entry entryKey="operations" type="strings" description="analysis script names (Java resource names, loaded with getResourceAsStream)">
		
		    <!-- NORMALISATION -->
			<value>/R/norm-affy.R</value>
			<value>/R/norm-affy-exon.R</value>
			<value>/R/norm-affy-snp.R</value>
			<value>/R/norm-agilent-one-color.R</value>
			<value>/R/norm-agilent.R</value>	
			<value>/R/norm-cdna.R</value>
			<value>/R/norm-illumina.R</value>
			<value>/R/norm-illumina-lumi.R</value>
			<value>/R/norm-lme.R</value>
			<value>/R/norm-illumina-SNP.R</value>
			<value>/R/norm-prenormalized.R</value>
			<value>/R/norm-specific-samples.R</value>
			<value>/R/norm-specific-genes.R</value>

			<!-- QUALITY CONTROL -->
			<value>/R/qc-affy.R</value>
			<value>/R/qc-affy-rle-nuse.R</value>						
			<value>/R/qc-cdna.R</value>				
			<value>/R/qc-illumina.R</value>
			<value>/R/qc-agilent.R</value>
			<value>/R/qc-agilent-one-color.R</value>

			<!-- PREPROCESSING -->
			<value>/R/filter-expression.R</value>
			<value>/R/filter-flags.R</value>
			<value>/R/filter-sd.R</value>
			<value>/R/filter-iqr.R</value>
			<value>/R/filter-cv.R</value>
			<value>/R/impute.R</value>
			<value>/R/na-omitted.R</value>			
				
			<!-- STATISTICS -->			
			<value>/R/stat-singleslide.R</value>
			<value>/R/stat-one-group.R</value>
			<value>/R/stat-two-groups.R</value>
			<value>/R/stat-ROTS.R</value>
			<value>/R/stat-sam.R</value>			
			<value>/R/stat-several-groups.R</value>
			<value>/R/stat-linear-modelling.R</value>			
			<value>/R/stat-correlate-with-phenodata.R</value>				
			<value>/R/stat-timeseries.R</value>			
			<value>/R/stat-chisq-snp.R</value>
			<value>/R/stat-adjust-pvalues.R</value>
			<value>/R/ordination-pca.R</value>
			<value>/R/ordination-ca.R</value>
			<value>/R/ordination-nmds.R</value>
			<value>/R/estimate-samplesize.R</value>

			<!-- CLUSTERING -->
			<value>/R/classification-knn.R</value>
			<value>/R/cluster-hierarchical.R</value>
			<value>/R/cluster-kmeans.R</value>
			<value>/R/cluster-kmeans-testK.R</value>
			<value>/R/cluster-qt.R</value>
			<value>/R/cluster-som.R</value>
			<value>/R/classification.R</value>
			
			<!-- ANNOTATION -->
			<value>/R/annotate-genelist2html.R</value>
			<value>/R/annotate-add-to-data.R</value> 
			<value>/bsh/annotate-cpdb.bsh</value>
<!--			<value>fi.csc.microarray.analyser.java.GeneCruiserAnnotationJob</value> -->
			
			<!-- PATHWAYS -->
			<value>/R/stat-hyperG-GO.R</value>	
			<value>/R/stat-hyperG-KEGG-PFAM.R</value>	
			<value>/R/stat-hyperG-safe.R</value>
			<value>/R/stat-hyperG-cytoband.R</value>
			<value>/R/stat-geneset.R</value>
<!--			<value>/R/pathway-bayesian.R</value> -->
<!--			<value>/R/pathway-boolean-bestim.R</value> -->

			<!-- PROMOTER -->
			<value>/R/promoter-tfbs.R</value>
			<value>/R/promoter-tfbs-cosmo.R</value>	
			<value>/R/promoter-cbust.R</value>
			<value>/R/promoter-retrprom.R</value>	

			<!-- VISUALISATION -->			
			<value>/R/plot-idiogram.R</value>
			<value>/R/plot-chrom-pos.R</value>
			<value>/R/plot-volcano.R</value>
			<value>/R/plot-volcano-data-exists.R</value> 
			<value>/R/plot-boxplot.R</value>
			<value>/R/plot-dendrogram.R</value>
			<value>/R/plot-histogram.R</value>
			<value>/R/plot-corrgram.R</value>
			<value>/R/plot-heatmap.R</value>

			<!-- UTILITIES -->
			<value>/R/search-correlation.R</value>
			<value>/R/search-queryword.R</value>
			<value>/R/merge-tables.R</value>
			<value>/R/extract-genes-from-clustering.R</value>
			<value>/R/extract-samples-from-dataset.R</value>
			<value>/R/extract-genes-from-stattest.R</value>
			<value>/R/extract-genes.R</value>
			<value>/R/calculate-fold-change.R</value>
			<value>/R/average-replicates.R</value>
			<value>/R/combine-probes-to-genes.R</value>
			<value>/R/change-interpretation.R</value>
			<value>/R/generate-phenodata.R</value>			
			<value>/R/filter-by-column.R</value>
			<value>/R/delete-columns.R</value>
			<value>/R/calculate-descriptive-statistics.R</value>
			<value>/R/sort-samples.R</value>
			<value>/R/sort-genes.R</value>
			<value>/R/sampling.R</value>
			<value>/R/export-tab2mage.R</value>
			<value>/R/export-soft.R</value>
			<value>/R/import-soft2.R</value>
			
			<!-- MISCELLANEOUS (SEQUENCE ANALYSIS) -->
			<value>/R/seqanal-msa.R</value>
			<value>/R/seqanal-phylogenetics.R</value>
		</entry>

		
		<entry entryKey="hidden-operations" type="strings" description="analysis script names (hidden, i.e., not shown in client">
			<value>fi.csc.microarray.analyser.java.FailingAnalysisJob</value>
			<value>/R/test.R</value>
			<value>/R/hidden/no-operation.R</value>
			<value>/R/hidden/echo.R</value>			
			<value>/R/hidden/fail.R</value>			
			<value>/R/hidden/input-output.R</value>
			<value>/R/hidden/simple-input-output.R</value>
			<value>/R/hidden/data-throughput.R</value>
			<value>/R/hidden/sleep.R</value>
			<value>/R/hidden/input-sleep-output.R</value>
			<value>/R/hidden/ws-affy-wizard.R</value>
		</entry>

	</configuration-module>
	
	<configuration-module moduleId="manager" description="manager service">
	
		<entry entryKey="jdbc-driver" type="string" description="driver class for JDBC">
			<value>org.h2.Driver</value>
		</entry>
	
		<entry entryKey="database-url" type="string" description="URL for JDBC">
			<value>jdbc:h2:database/chipster-manager</value>
		</entry>

		<entry entryKey="database-username" type="string" description="username for JDBC">
			<value>chipster</value>
		</entry>

		<entry entryKey="database-password" type="string" description="password for JDBC">
			<value></value>
		</entry>

		<entry entryKey="start-web-console" type="boolean" description="is web console enabled">
			<value>true</value>
		</entry>

		<entry entryKey="web-console-port" type="int" mustBeSet="true" description="HTTP port for web console">
		</entry>
		
		<entry entryKey="backup-dir" type="string" description="directory where backups are stored">
			<value>database-backups</value>
		</entry>
		
		<entry entryKey="backup-time" type="string" description="">
			<value>00:05</value>
		</entry>
		
		<entry entryKey="backup-interval" type="int" description="backup interval in hours">
			<value>24</value>
		</entry>
			
	</configuration-module>
	
	
	<configuration-module moduleId="client" description="client constants">

		<entry entryKey="max-jobs" type="int" description="maximum job count">
			<value>10</value>
		</entry>
		
		<entry entryKey="max-job-size-mb" type="int" description="maximum job size in megabytes">
			<value>5000</value>
		</entry>

	</configuration-module>
	

</configuration>